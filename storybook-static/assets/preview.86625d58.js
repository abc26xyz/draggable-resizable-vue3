import{a as Ge}from"./index.fd1d6781.js";import{r as g,u as Ue,a as z,o as Oe,w as W,b as _,d as Ie,F as je,e as qe,f as L,n as ee,g as ae,i as pe,j as Je,k as te,l as he,m as ye}from"./vue.esm-bundler.ea0bdb70.js";import"./iframe.c2dca790.js";import"./es.map.constructor.4b8759ad.js";import"./decorateStory.30661c92.js";function xe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function C(t,n,e,x=1){const[Y,$]=typeof x=="number"?[x,x]:x,N=Math.round(n/Y/t[0])*t[0],b=Math.round(e/$/t[1])*t[1];return[N,b]}function le(t,n,e){return t-n-e}function ue(t,n,e){return t-n-e}function V(t,n,e){return n!==null&&t<n?n:e!==null&&e<t?e:t}function be(t,n,e){let x=t;const Y=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find($=>xe(x[$]));if(!xe(x[Y]))return!1;do{if(x[Y](n))return!0;if(x===e)return!1;x=x.parentNode}while(x);return!1}function Ke(t){const n=window.getComputedStyle(t);return[parseFloat(n.getPropertyValue("width"),10),parseFloat(n.getPropertyValue("height"),10)]}function X(t,n,e){!t||(t.attachEvent?t.attachEvent("on"+n,e):t.addEventListener?t.addEventListener(n,e,!0):t["on"+n]=e)}function we(t,n,e){!t||(t.detachEvent?t.detachEvent("on"+n,e):t.removeEventListener?t.removeEventListener(n,e,!0):t["on"+n]=null)}const Qe=["onMousedown","onTouchstart"],Se={__name:"DraggableResizableVue3",props:{draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},w:{type:[Number,String],validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},active:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},activeOnHover:{type:Boolean,default:!1},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},lockAspectRatio:{type:Boolean,default:!1},handlesType:{type:String,default:"handles",validator:t=>["handles","borders","custom"].includes(t)},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const n=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(e=>n.has(e))).size===t.length}},handlesSize:{type:Number,default:10},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},showGrid:{type:[Boolean,String],default:!1,validator:t=>[!0,!1,"x","y","both"].includes(t)},gridColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},parent:{type:[Boolean,String],default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},className:{type:String,default:"drv"},classNameDraggable:{type:String,default:"drv-draggable"},classNameResizable:{type:String,default:"drv-resizable"},classNameDragging:{type:String,default:"drv-dragging"},classNameResizing:{type:String,default:"drv-resizing"},classNameActive:{type:String,default:"drv-active"},classNameHandle:{type:String,default:"drv-handle"},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},emits:["update:x","update:y","update:w","update:h","update:active","resizing","resizestop","dragging","dragstop","activated","deactivated"],setup(t,{emit:n}){const e=t;Je(a=>({"69e1cfca":L(ze),"6818b3c6":L(Re)}));const x={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},Y={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},$={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let N=x.mouse;const b=g(null),F=g(null),P=g({h:"auto",w:"auto",active:!1,x:0,y:0}),ne=Ue(),d=z({get(){return e.w||P.value.w},set(a){n("update:w",a),P.value.w=a}}),f=z({get(){return e.h||P.value.h},set(a){n("update:h",a),P.value.h=a}}),o=z({get(){return e.x||P.value.x},set(a){n("update:x",a),P.value.x=a}}),s=z({get(){return e.y||P.value.y},set(a){n("update:y",a),P.value.y=a}}),v=g(null),m=g(null),T=z({get(){return e.active||P.value.active},set(a){n("update:active",a),P.value.active=a}}),ze=z(()=>e.handlesSize+"px"),Re=z(()=>e.handlesSize/2+"px"),j=g(!1),q=g(!1),p=g(null),R=g(null),M=g(null),w=g(null),D=g(!1),B=g(!1),J=g(!1),oe=g(!1),Me=g(e.z),c=g(null),r=g(null),Ve=z(()=>({transform:`translate(${o.value}px, ${s.value}px)`,width:Pe.value,height:Te.value,zIndex:Me.value,...B.value&&e.disableUserSelect?Y:$})),Ne=z(()=>{const a={x:`linear-gradient(-90deg, ${e.gridColor} 1px, transparent 1px) 0px 0px / ${e.grid[0]}px ${e.grid[0]}px`,y:`linear-gradient(0deg, ${e.gridColor} 1px, transparent 1px) 0px 0px / ${e.grid[1]}px ${e.grid[1]}px`};return e.showGrid==="x"||e.showGrid==="y"?a[e.showGrid]:e.showGrid?`${a.x}, ${a.y}`:null}),Be=z(()=>e.resizable?e.handles:[]),Pe=z(()=>d.value==="auto"&&!j.value?"auto":d.value+"px"),Te=z(()=>f.value==="auto"&&!q.value?"auto":f.value+"px"),k=g(e.minWidth),A=g(e.minHeight),h=g(e.maxWidth),y=g(e.maxHeight),se=z(()=>Boolean(w.value)&&(w.value.includes("l")||w.value.includes("r"))),re=z(()=>Boolean(w.value)&&(w.value.includes("t")||w.value.includes("b"))),K=()=>{c.value={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},r.value={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},De=()=>{if(e.parent){const[a,u]=ie();R.value=a,M.value=u,v.value=R.value-d.value-o.value,m.value=M.value-f.value-s.value}},ie=()=>{if(e.parent){const a=typeof e.parent=="string"?b.value.closest(e.parent):b.value.parentNode;F.value=a;const u=window.getComputedStyle(a,null);return[parseInt(u.getPropertyValue("width"),10),parseInt(u.getPropertyValue("height"),10)]}return[null,null]},ve=()=>{if(e.parent&&e.showGrid){if(!F.value){const a=typeof e.parent=="string"?b.value.closest(e.parent):b.value.parentNode;F.value=a}F.value.style.background=Ne.value}},He=a=>{N=x.touch,me(a)},Le=a=>{N=x.mouse,me(a)},me=a=>{if(a instanceof MouseEvent&&a.which!==1)return;const u=a.target||a.srcElement;if(b.value.contains(u)){if(e.onDragStart(a)===!1)return;if(e.dragHandle&&!be(u,e.dragHandle,b.value)||e.dragCancel&&be(u,e.dragCancel,b.value)){B.value=!1;return}T.value||(T.value=!0,n("activated")),e.draggable&&(J.value=!0),c.value.mouseX=a.touches?a.touches[0].pageX:a.pageX,c.value.mouseY=a.touches?a.touches[0].pageY:a.pageY,c.value.left=o.value,c.value.right=v.value,c.value.top=s.value,c.value.bottom=m.value,e.parent&&(r.value=Q()),X(document.documentElement,N.move,Ae),X(document.documentElement,N.stop,fe)}},Q=()=>({minLeft:o.value%e.grid[0],maxLeft:Math.floor((R.value-d.value-o.value)/e.grid[0])*e.grid[0]+o.value,minRight:v.value%e.grid[0],maxRight:Math.floor((R.value-d.value-v.value)/e.grid[0])*e.grid[0]+v.value,minTop:s.value%e.grid[1],maxTop:Math.floor((M.value-f.value-s.value)/e.grid[1])*e.grid[1]+s.value,minBottom:m.value%e.grid[1],maxBottom:Math.floor((M.value-f.value-m.value)/e.grid[1])*e.grid[1]+m.value}),ce=a=>{const u=a.target||a.srcElement,l=new RegExp(e.className+"-([trmbl]{2})","");(!b.value||!b.value.contains(u)&&!l.test(u.className))&&(T.value&&!e.preventDeactivation&&(T.value=!1,n("deactivated")),we(document.documentElement,N.move,G)),K()},ke=(a,u)=>{N=x.touch,de(a,u)},de=(a,u)=>{u instanceof MouseEvent&&u.which!==1||e.onResizeStart(a,u)!==!1&&(u.stopPropagation&&u.stopPropagation(),e.lockAspectRatio&&!a.includes("m")?w.value="m"+a.substring(1):w.value=a,oe.value=!0,c.value.mouseX=u.touches?u.touches[0].pageX:u.pageX,c.value.mouseY=u.touches?u.touches[0].pageY:u.pageY,c.value.left=o.value,c.value.right=v.value,c.value.top=s.value,c.value.bottom=m.value,r.value=Z(),X(document.documentElement,N.move,G),X(document.documentElement,N.stop,fe))},Z=()=>{const[a,u]=e.grid;e.lockAspectRatio&&(k.value/A.value>p.value?A.value=k.value/p.value:k.value=p.value*A.value,h.value&&y.value?(h.value=Math.min(h.value,p.value*y.value),y.value=Math.min(y.value,h.value/p.value)):h.value?y.value=h.value/p.value:y.value&&(h.value=p.value*y.value)),h.value=h.value-h.value%a,y.value=y.value-y.value%u;const l={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return e.parent?(l.minLeft=o.value%a,l.maxLeft=o.value+Math.floor((d.value-k.value)/a)*a,l.minTop=s.value%u,l.maxTop=s.value+Math.floor((f.value-A.value)/u)*u,l.minRight=v.value%a,l.maxRight=v.value+Math.floor((d.value-k.value)/a)*a,l.minBottom=m.value%u,l.maxBottom=m.value+Math.floor((f.value-A.value)/u)*u,h.value&&(l.minLeft=Math.max(l.minLeft,R.value-v.value-h.value),l.minRight=Math.max(l.minRight,R.value-o.value-h.value)),y.value&&(l.minTop=Math.max(l.minTop,M.value-m.value-y.value),l.minBottom=Math.max(l.minBottom,M.value-s.value-y.value)),e.lockAspectRatio&&(l.minLeft=Math.max(l.minLeft,o.value-s.value*p.value),l.minTop=Math.max(l.minTop,s.value-o.value/p.value),l.minRight=Math.max(l.minRight,v.value-m.value*p.value),l.minBottom=Math.max(l.minBottom,m.value-v.value/p.value))):(l.minLeft=null,l.maxLeft=o.value+Math.floor((d.value-k.value)/a)*a,l.minTop=null,l.maxTop=s.value+Math.floor((f.value-A.value)/u)*u,l.minRight=null,l.maxRight=v.value+Math.floor((d.value-k.value)/a)*a,l.minBottom=null,l.maxBottom=m.value+Math.floor((f.value-A.value)/u)*u,h.value&&(l.minLeft=-(v.value+h.value),l.minRight=-(o.value+h.value)),y.value&&(l.minTop=-(m.value+y.value),l.minBottom=-(s.value+y.value)),e.lockAspectRatio&&h.value&&y.value&&(l.minLeft=Math.min(l.minLeft,-(v.value+h.value)),l.minTop=Math.min(l.minTop,-(y.value+m.value)),l.minRight=Math.min(l.minRight,-o.value-h.value),l.minBottom=Math.min(l.minBottom,-s.value-y.value))),l},Ae=a=>{D.value?G(a):J.value&&Xe(a)},Xe=a=>{const u=e.grid,l=e.axis&&e.axis!=="y"?c.value.mouseX-(a.touches?a.touches[0].pageX:a.pageX):0,i=e.axis&&e.axis!=="x"?c.value.mouseY-(a.touches?a.touches[0].pageY:a.pageY):0,[S,H]=C(u,l,i,e.scale),E=V(c.value.left-S,r.value.minLeft,r.value.maxLeft),U=V(c.value.top-H,r.value.minTop,r.value.maxTop);if(e.onDrag(o,s)===!1)return;const O=V(c.value.right+S,r.value.minRight,r.value.maxRight),I=V(c.value.bottom+H,r.value.minBottom,r.value.maxBottom);o.value=E,s.value=U,v.value=O,m.value=I,n("dragging",o.value,s.value),B.value=!0},Ye=a=>{const[u,l]=C(e.grid,a,s.value,1),i=V(u,r.value.minLeft,r.value.maxLeft);o.value=i,v.value=R.value-d.value-i},Ee=a=>{const[u,l]=C(e.grid,o.value,a,1),i=V(l,r.value.minTop,r.value.maxTop);s.value=i,m.value=M.value-f.value-i},G=a=>{let u=o.value,l=s.value,i=v.value,S=m.value;const H=c.value.mouseX-(a.touches?a.touches[0].pageX:a.pageX),E=c.value.mouseY-(a.touches?a.touches[0].pageY:a.pageY);!j.value&&H&&(j.value=!0),!q.value&&E&&(q.value=!0);const[U,O]=C(e.grid,H,E,e.scale);w.value.includes("b")?(S=V(c.value.bottom+O,r.value.minBottom,r.value.maxBottom),e.lockAspectRatio&&re&&(i=v.value-(m.value-S)*p.value)):w.value.includes("t")&&(l=V(c.value.top-O,r.value.minTop,r.value.maxTop),e.lockAspectRatio&&re&&(u=o.value-(s.value-l)*p.value)),w.value.includes("r")?(i=V(c.value.right+U,r.value.minRight,r.value.maxRight),e.lockAspectRatio&&se&&(S=m.value-(v.value-i)/p.value)):w.value.includes("l")&&(u=V(c.value.left-U,r.value.minLeft,r.value.maxLeft),e.lockAspectRatio&&se&&(l=s.value-(o.value-u)/p.value));const I=le(R.value,u,i),ge=ue(M.value,l,S);e.onResize(w.value,u,l,I,ge)!==!1&&(o.value=u,s.value=l,v.value=i,m.value=S,d.value=I,f.value=ge,n("resizing",o.value,s.value,d.value,f.value),D.value=!0)},We=a=>{const[u]=C(e.grid,a,0,1);let l=V(R.value-u-o.value,r.value.minRight,r.value.maxRight),i=m.value;e.lockAspectRatio&&(i=m.value-(v.value-l)/p.value);const S=le(R.value,o.value,l),H=ue(M.value,s.value,i);v.value=l,m.value=i,d.value=S,f.value=H},Ce=a=>{const[u,l]=C(e.grid,0,a,1);let i=V(M.value-l-s.value,r.value.minBottom,r.value.maxBottom),S=v.value;e.lockAspectRatio&&(S=v.value-(m.value-i)*p.value);const H=le(R.value,o.value,S),E=ue(M.value,s.value,i);v.value=S,m.value=i,d.value=H,f.value=E},fe=a=>{w.value=null,K(),J.value=!1,oe.value=!1,D.value&&(D.value=!1,n("resizestop",o.value,s.value,d.value,f.value)),B.value&&(B.value=!1,n("dragstop",o.value,s.value)),we(document.documentElement,N.move,G)},$e=()=>{e.activeOnHover&&(T.value=!0)},Fe=()=>{e.activeOnHover&&!B.value&&(T.value=!1)};return Oe(()=>{K(),e.enableNativeDrag||(b.value.ondragstart=()=>!1);const[a,u]=ie();R.value=a,M.value=u;const[l,i]=Ke(b.value);p.value=(d.value!=="auto"?d.value:l)/(f.value!=="auto"?f.value:i),d.value=d.value!=="auto"?d.value:l,f.value=f.value!=="auto"?f.value:i,v.value=R.value-d.value-o.value,m.value=M.value-f.value-s.value,T.value&&n("activated"),e.showGrid&&ve(),X(document.documentElement,"mousedown",ce),X(document.documentElement,"touchend touchcancel",ce),X(window,"resize",De)}),W(()=>e.x,a=>{D.value||B.value||(e.parent&&(r.value=Q()),Ye(a))}),W(()=>e.y,a=>{D.value||B.value||(e.parent&&(r.value=Q()),Ee(a))}),W(()=>e.lockAspectRatio,a=>{a?p.value=d.value/f.value:p.value=void 0}),W(()=>e.w,a=>{D.value||B.value||(e.parent&&(r.value=Z()),We(a))}),W(()=>e.h,a=>{D.value||B.value||(e.parent&&(r.value=Z()),Ce(a))}),W(()=>e.showGrid,()=>{ve()}),(a,u)=>(te(),_("div",{ref_key:"el",ref:b,style:pe(L(Ve)),class:ee([{[t.classNameActive]:L(T),[t.classNameDragging]:B.value,[t.classNameResizing]:D.value,[t.classNameDraggable]:t.draggable,[t.classNameResizable]:t.resizable},t.className]),onMousedown:Le,onTouchstart:He,onMouseover:$e,onMouseleave:Fe},[Ie("div",{class:ee("drv-"+t.handlesType)},[(te(!0),_(je,null,qe(L(Be),l=>(te(),_("div",{key:l,class:ee([t.classNameHandle,t.classNameHandle+"-"+l,t.classNameHandle!=="drv-handle"?"drv-handle":"",t.classNameHandle!=="drv-handle"?"drv-handle-"+l:""]),style:pe({display:L(T)?"block":"none"}),onMousedown:he(i=>de(l,i),["stop","prevent"]),onTouchstart:he(i=>ke(l,i),["stop","prevent"])},[L(ne)["handle-"+l]?ae(a.$slots,"handle-"+l,{key:0}):ye("",!0),L(ne)["handle-"+l]?ye("",!0):ae(a.$slots,"handle",{key:1})],46,Qe))),128))],2),ae(a.$slots,"default")],38))}};Se.__docgenInfo={exportName:"default",displayName:"DraggableResizableVue3",description:"",tags:{},props:[{name:"draggable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"resizable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"x",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"y",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"z",type:{name:"string|number"},defaultValue:{func:!1,value:"'auto'"}},{name:"w",type:{name:"number|string"}},{name:"h",type:{name:"number|string"}},{name:"minWidth",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"minHeight",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"maxWidth",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"maxHeight",type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"active",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"preventDeactivation",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"activeOnHover",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disableUserSelect",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"enableNativeDrag",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"lockAspectRatio",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"handlesType",type:{name:"string"},defaultValue:{func:!1,value:"'handles'"},values:["handles","borders","custom"]},{name:"handles",type:{name:"array"},defaultValue:{func:!1,value:"['tl', 'tm', 'tr', 'mr', 'br', 'bm', 'bl', 'ml']"}},{name:"handlesSize",type:{name:"number"},defaultValue:{func:!1,value:"10"}},{name:"dragHandle",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"dragCancel",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"axis",type:{name:"string"},defaultValue:{func:!1,value:"'both'"},values:["x","y","both"]},{name:"grid",type:{name:"array"},defaultValue:{func:!1,value:"[1, 1]"}},{name:"showGrid",type:{name:"boolean|string"},defaultValue:{func:!1,value:"false"},values:[!0,"x","y","both"]},{name:"gridColor",type:{name:"string"},defaultValue:{func:!1,value:"'rgba(0, 0, 0, 0.1)'"}},{name:"parent",type:{name:"boolean|string"},defaultValue:{func:!1,value:"false"}},{name:"scale",type:{name:"number|array"},defaultValue:{func:!1,value:"1"}},{name:"className",type:{name:"string"},defaultValue:{func:!1,value:"'drv'"}},{name:"classNameDraggable",type:{name:"string"},defaultValue:{func:!1,value:"'drv-draggable'"}},{name:"classNameResizable",type:{name:"string"},defaultValue:{func:!1,value:"'drv-resizable'"}},{name:"classNameDragging",type:{name:"string"},defaultValue:{func:!1,value:"'drv-dragging'"}},{name:"classNameResizing",type:{name:"string"},defaultValue:{func:!1,value:"'drv-resizing'"}},{name:"classNameActive",type:{name:"string"},defaultValue:{func:!1,value:"'drv-active'"}},{name:"classNameHandle",type:{name:"string"},defaultValue:{func:!1,value:"'drv-handle'"}},{name:"onDragStart",type:{name:"func"},defaultValue:{func:!0,value:"() => true"}},{name:"onDrag",type:{name:"func"},defaultValue:{func:!0,value:"() => true"}},{name:"onResizeStart",type:{name:"func"},defaultValue:{func:!0,value:"() => true"}},{name:"onResize",type:{name:"func"},defaultValue:{func:!0,value:"() => true"}}],events:[{name:"update:x"},{name:"update:y"},{name:"update:w"},{name:"update:h"},{name:"update:active"},{name:"resizing"},{name:"resizestop"},{name:"dragging"},{name:"dragstop"},{name:"activated"},{name:"deactivated"}],slots:[{name:"default",scoped:!0,bindings:[{name:"name",title:"binding"}]},{name:"handle"}]};Ge.component("DraggableResizableVue",Se);const la={controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}},ua={showPanel:!1};export{ua as options,la as parameters};
//# sourceMappingURL=preview.86625d58.js.map
